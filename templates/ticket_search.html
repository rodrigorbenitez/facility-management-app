{% extends "base.html" %}

{% block content %}
<h4 class="sub-header">Órdenes de servicio: </h4>
<div class="container">

  <div id="searchBarContainer">
  <input class="form-control empty" id="tableInputSearch" type="text" placeholder="&#xf002"><div id="cantOs"><p>{{ticketCount}} órdenes de trabajo</p></div>
  <a id="crearOsBtn" class="btn blueBtn" onclick="window.open('/generar_os')"><i class="fas fa-plus">&nbsp;</i>&nbsp;Crear Orden de trabajo</a>
  </div>
  <div class="container" id="searchBy">
    <div id="searchFor">Buscar por:</div>
      <select class="form-control" id="column" name="column" required>
        <option value="" ><span style="color:#428BCA ;">&#xf002</span> Todos</option>
        <option value="0">ID</option>
        <option value="1">Fecha de entrada</option>
        <option value="2">Descripción</option>
        <option value="3">Prioridad</option>
        <option value="4">Estado</option>
        <option value="5">Predio</option>
      </select>
  </div>
  <div class="table-responsive" id="TicketSearchContainer">
  <table class="table table-sm" id="tableOS">
    <thead>
      <tr>
        <th scope="col" style="width:5%">ID</th>
        <th scope="col" style="width:5%">Detalle</th>
        <th scope="col" style="width:20%">Fecha de entrada</th>
        <th scope="col" style="width:40%">Descripción</th>
        <th scope="col" style="width:10%">Prioridad</th>
        <th scope="col" style="width:10%">Estado</th>
        <th scope="col" style="width:10%">Predio</th>
      </tr>
    </thead>
    <tbody id="myTable">
      {% for ticket in ticket %}
                <tr>
                  <td>{{ticket.id}}</td>
                  <td><a href="{{url_for('os_detalle', ticket_id=ticket.id)}}"><i class="fas fa-eye"></i></a></td>
                  <td>{{ticket.date_start.strftime('%d-%m-%Y')}}</td>
                  <td>{{ticket.description}}</td>
                  <td id="priority">{{ticket.priority}}</td>
                  <td id="status">{{ticket.status}}</td>
                  <td>{{ticket.siteName}}</td>

                </tr>
                {% endfor %}
    </tbody>
  </table>
  </div>
</div>
{% endblock %}